<mvc:View xmlns:calendar="sap.ui.unified.calendar"
    controllerName="com.dash.employeedashboard.controller.Admin"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:fb="sap.ui.comp.filterbar"
 xmlns:svm="sap.ui.comp.smartvariants"
>
    <Page
        id="adminWelPage"
        title="Welcome On Admin Page"
         
    >
        <content>
            <uxap:ObjectPageLayout
                id="ObjectPageWelAdmin"
                upperCaseAnchorBar="false"
            >
               <uxap:headerTitle>
					<uxap:ObjectPageDynamicHeaderTitle>
                    <uxap:actions>
                      <VBox
                id="homePageVBox"
                fitContainer="true"
            >
                <OverflowToolbar
                    id="homePageFirstVBoxOt"
                    class="sapFDynamicPageAlignContent"
                >
                    <ToolbarSpacer />
                    
                    <Button
                        icon="sap-icon://add"
                        text="Add New Project"
                        tooltip="Add New Project"
                        press=".addForm"
                        
                    />
                    <Button
                        icon="sap-icon://sort"
                        text="Sort"
                        
                        press=".onSort"
                    />
                    <Button
                        text="Log Out"
                        
                        press="onLogOutAdmin"
                    />
                    
                </OverflowToolbar>
            </VBox>
                    	</uxap:actions>
					</uxap:ObjectPageDynamicHeaderTitle>
                    	</uxap:headerTitle>
                <uxap:sections>
                    <uxap:ObjectPageSection
                        id="adminWelProjectSTatusTile"
                        titleUppercase="false"
                        title="Project Status"
                    >
                    
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection
                                id="adminWelProjectSTatusSubSection"
                                titleUppercase="false"
                            >
                            	
                                <uxap:blocks>
                                    <VBox>
                                        <HBox justifyContent="SpaceAround">
                                             <GenericTile
                                                header="Total Projects"
                                                class="customTileBackground" 
                                                press=".onProjectTilePress"
                                                frameType="OneByHalf"
                                            >
                                                <TileContent>
                                                    <NumericContent
                                                        id="totalProject"
                                                        value="0"
                                                    />
                                                </TileContent>
                                            </GenericTile>

                                            <GenericTile
                                                header="Total Employees"
                                                class="customTileBackground" 
                                                press=".onEmployeeTilePress"
                                                frameType="OneByHalf"
                                            >
                                                <TileContent>
                                                    <NumericContent
                                                        id="totalEmployees"
                                                        value="0"
                                                    />
                                                </TileContent>
                                            </GenericTile>

                                            <GenericTile
                                                header="Running Projects"
                                                 class="customTileBackground" 
                                                press=".onTilePress"
                                                frameType="OneByHalf"
                                            >
                                                <TileContent>
                                                    <NumericContent
                                                        id="runningProjects"
                                                        value="0"
                                                    />
                                                </TileContent>
                                            </GenericTile>
                                             <GenericTile
                                                header="Delayed Projects"
                                                 class="customTileBackground" 
                                                press=".onTilePress"
                                                frameType="OneByHalf"
                                            >
                                                <TileContent>
                                                    <NumericContent
                                                        id="runningLateProjects"
                                                        value="0"
                                                    />
                                                </TileContent>
                                            </GenericTile> 
                                        </HBox>
                                    </VBox>
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>

                    <uxap:ObjectPageSection>
                        <uxap:subSections>
                            <uxap:ObjectPageSubSection
                                title="Projects Table"
                                titleUppercase="false"
                            >
                                <uxap:blocks>
                                    <VBox>
                                    <fb:FilterBar id="filterbarAdmin" persistencyKey="myPersKey" useToolbar="false" search=".onSearch" filterChange=".onFilterChange" afterVariantLoad=".onAfterVariantLoad">
							<fb:filterGroupItems>
								<fb:FilterGroupItem name="projectId" label="Project Id" groupName="Group1" visibleInFilterBar="true">
									<fb:control>
										<MultiComboBox
											name="projectId"
											selectionChange=".onSelectionChange"
											items="{
												path: '/Projects',
												templateShareable: true
											}"
										>
											<core:Item key="{projectId}" text="{projectId}"/>
										</MultiComboBox>
									</fb:control>
								</fb:FilterGroupItem>
								<fb:FilterGroupItem name="projectName" label="Project Name" groupName="Group1" visibleInFilterBar="true">
									<fb:control>
										<MultiComboBox
											name="projectName"
											selectionChange=".onSelectionChange"
											items="{
												path: '/Projects',
												templateShareable: true
											}"
										>
											<core:Item key="{projectName}" text="{projectName}"/>
										</MultiComboBox>
									</fb:control>
								</fb:FilterGroupItem>
								<fb:FilterGroupItem name="clientName" label="Client Name" groupName="Group1" visibleInFilterBar="true">
									<fb:control>
										<MultiComboBox
											name="clientName"
											selectionChange=".onSelectionChange"
											items="{
												path: '/Projects',
												templateShareable: true
											}"
										>
											<core:Item key="{clientName}" text="{clientName}"/>
										</MultiComboBox>
									</fb:control>
								</fb:FilterGroupItem>
							</fb:filterGroupItems>
						</fb:FilterBar>
                                       
                                        <Table
                                            id="projectTableSeeingAdmin"
                                            items="{ path: '/Projects' }"
                                            itemPress="onItemPress"
                                            mode="SingleSelectMaster"
                                            growing="true"
                                            growingThreshold="10"
                                            visible="true"
                                        >
                                        
                                            <columns>
                                                <Column
                                                    id="adminPageTabProjIdCol"
                                                >
                                                    <Text
                                                        id="adminPageTabProjIdTxt"
                                                        text="Project ID"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabProjNameCol"
                                                >
                                                    <Text
                                                        id="adminPageTabProjNameTxt"
                                                        text="Project Name"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabAssignToCol"
                                                >
                                                    <Text
                                                        id="adminPageTabAssignToTxt"
                                                        text="Assigned To"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabTimeAssignCol"
                                                >
                                                    <Text
                                                        id="adminPageTabTimeAssignToTxt"
                                                        text="Time Assigned"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabChangesCol"
                                                >
                                                    <Text
                                                        id="adminPageTabChangesTxt"
                                                        text="Changes"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabClientNameCol"
                                                >
                                                    <Text
                                                        id="adminPageTabClientNameTxt"
                                                        text="Client Name"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabStatusCol"
                                                >
                                                    <Text
                                                        id="adminPageTabStatusTxt"
                                                        text="Description"
                                                    />
                                                </Column>
                                                <Column
                                                    id="adminPageTabUrgencyCol"
                                                >
                                                    <Text
                                                        id="adminPageTabUrgencyTxt"
                                                        text="Urgency"
                                                    />
                                                </Column>
                                                 <Column
                                                    id="adminPageTabStartDateCol"
                                                >
                                                    <Text
                                                        id="adminPageTabStartDateTxt"
                                                        text="Start Date"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text text="End Date" />
                                                </Column> 
                                               <Column>
                                                    <Text text="Project Status" />
                                                </Column> 
                                            </columns>
                                            <items>
                                                <ColumnListItem type="Active">
                                                    <cells>
                                                        <Title
                                                            id="adProjectId"
                                                            text="{projectId}"
                                                        />
                                                        <Text
                                                            id="adProjectName"
                                                            text="{projectName}"
                                                        />
                                                        <Text
                                                            id="adAssignedToP"
                                                            text="{assignedToP}"
                                                        />
                                                        <Text
                                                            id="adTimeAssigned"
                                                            text="{timeAssigned}"
                                                        />
                                                        <Text
                                                            id="adProjectChanges"
                                                            text="{projectChanges}"
                                                        />
                                                        <Text
                                                            id="adClientName"
                                                            text="{clientName}"
                                                        />
                                                        <Text
                                                            id="adDescription"
                                                            text="{description}"
                                                        />
                                                        <Text
                                                            id="adUrgency"
                                                            text="{urgency}"
                                                            
                                                        />
                                                        <Text
                                                            id="adCreatedBy"
                                                            text="{createdBy}"
                                                        />
                                                        <Text
                                                            id="adModifiedBy"
                                                            text="{modifiedBy}"
                                                        />

                                                        <!-- <Text
                                                            id="adStartDate"
                                                            text="{startDate}"
                                                        />
                                                        <Text
                                                            id="adEnddate"
                                                            text="{endDate}"
                                                        /> -->
                                                        
                                                       <ObjectStatus
                    text="{status}"
                    state="{= ${moduleStatus} === 'Completed' ? 'Success' : 
                             ${moduleStatus} === 'Running' ? 'Warning' : 
                             'Error'}"
                    class="{= ${moduleStatus} === 'Completed' ? 'projectStatusSuccess' : 
                             ${moduleStatus} === 'Running' ? 'projectStatusWarning' : 
                             'projectStatusError'}"
                />
                                                    </cells>
                                                </ColumnListItem>
                                            </items>
                                        </Table>
                                        
                                        <Table
                                            id="employeeTable"
                                            items="{/Employees}"
                                            itemPress=".onItemPressed"
                                            mode="SingleSelectMaster"
                                            headerText="Employees"
                                             growing="true" 
                                            growingThreshold="10"
                                            visible="false"
                                        >
                                            
                                            <columns>
                                                <Column>
                                                    <Text
                                                        text="Employee Code"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Employee Name"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text text="Rating" />
                                                </Column>
                                                <Column>
                                                    <Text text="Manager" />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Time Taken (hours)"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Permission to Edit"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Permission to View"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Permission to Create Project"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Permission to Create Sub-Project"
                                                    />
                                                </Column>
                                                <Column>
                                                    <Text
                                                        text="Permission to Create Employee"
                                                    />
                                                </Column>
                                                
                                            </columns>

                                            <items>
                                                <ColumnListItem type="Active">
                                                    <cells>
                                                        <Text
                                                            text="{empCode}"
                                                        />
                                                        <Text
                                                            text="{empName}"
                                                        />
                                                        <Text text="{rating}" />
                                                        <Text
                                                            text="{managerId}"
                                                        />
                                                        <!-- Manager's Name from the Association -->
                                                        <Text
                                                            text="{timeTaken}"
                                                        />
                                                        <Text
                                                            text="{permissionToEdit}"
                                                        />
                                                        <Text
                                                            text="{permissionToView}"
                                                        />
                                                        <Text
                                                            text="{permissionToCreateP}"
                                                        />
                                                        <Text
                                                            text="{permissionToCreateSP}"
                                                        />
                                                        <Text
                                                            text="{permissionToCreateE}"
                                                        />
                                                        

                                                       
                                                    </cells>
                                                </ColumnListItem>
                                            </items>
                                        </Table>
                                    </VBox>
                                </uxap:blocks>
                            </uxap:ObjectPageSubSection>
                        </uxap:subSections>
                    </uxap:ObjectPageSection>
                </uxap:sections>
            </uxap:ObjectPageLayout>
        </content>
    </Page>
</mvc:View>
